# Build mapSoN.

mapson == %mapson.c.sm +lib=(libexceptions.a) \
                       +lib=(librfc822.a) \
                       +lib=(libmpools.a) \
                       +lib=(liblists.a) \
		       +(my_db_linklib.flags) \
		       :exe
%mapson.c.sm == <<
    address_db.c
    array.c
    confirm.c
    cookie.c
    escape_from.c
    fail_safe.c
    get_user_name.c
    home_dir.c
    is_confirmation.c
    loadfile.c
    log.c
    mail_rescue.c
    mailbox_path.c
    main.c
    md5.c
    parse_mail.c
    ruleset.l +lex_prefix='rlst_' :c
    save_to.c
    spool.c
    spool_dir.c

liblists.a      == liblists/%liblists.a.sm +cc='cc' :a
libmpools.a     == libmpools/%libmpools.a.sm +cc='cc' :a
librfc822.a     == librfc822/%librfc822.a.sm +cc='cc' :a
libexceptions.a == libexceptions/%libexceptions.a.sm +cc='cc' :a

configure           == configure.in :ac
paths.h             == /dev/zero +cmd=(./configure) +output_show :output/paths.h
my_db.h             == /dev/zero +cmd=(./configure) +output_show :output/my_db.h
my_db_linklib.flags == /dev/zero +cmd=(./configure) +output_show :output/my_db_linklib.flags

%clean ! == !<<
    rm -f paths.h configure mapson config.log config.status
    rm -f my_db.h my_db_linklib.flags
    rm -f libexceptions.a liblists.a libmpools.a librfc822.a
