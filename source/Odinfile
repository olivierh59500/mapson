# Build mapSoN.

mapson == %mapson.c.sm +lib=(libexceptions/libexceptions.a) \
                       +lib=(librfc822/librfc822.a) \
                       +lib=(libmpools/libmpools.a) \
                       +lib=(liblists/liblists.a) \
		       +lib=db \
		       :exe

%mapson.c.sm == <<
    address_db.c
    array.c
    confirm.c
    cookie.c
    escape_from.c
    fail_safe.c
    get_user_name.c
    home_dir.c
    is_confirmation.c
    loadfile.c
    log.c
    mail_rescue.c
    mailbox_path.c
    main.c
    md5.c
    parse_mail.c
    ruleset.l :c +(%ruleset.l.flags)
    save_to.c
    spool.c
    spool_dir.c

%ruleset.l.flags ==<<
    +define='yy_create_buffer=rlst_create_buffer'
    +define='yy_delete_buffer=rlst_delete_buffer'
    +define='yy_flex_debug=rlst_flex_debug'
    +define='yy_init_buffer=rlst_init_buffer'
    +define='yy_flush_buffer=rlst_flush_buffer'
    +define='yy_load_buffer_state=rlst_load_buffer_state'
    +define='yy_switch_to_buffer=rlst_switch_to_buffer'
    +define='yyin=rlst_in'
    +define='yyleng=rlst_leng'
    +define='yylex=rlst_lex'
    +define='yylineno=rlst_lineno'
    +define='yyout=rlst_out'
    +define='yyrestart=rlst_restart'
    +define='yytext=rlst_text'
    +define='yywrap=rlst_wrap'
    +define='yy_scan_buffer=rlst_scan_buffer'
    +define='yy_scan_string=rlst_scan_string'
    +define='yy_scan_bytes=rlst_scan_bytes'
