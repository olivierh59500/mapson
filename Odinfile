# Build mapSoN.

mapson == %mapson.cc.sm +(%comile_flags) \
			+lib=(librfc822.a) \
			+lib=(libparse-config-file.a) \
			+lib=(libvarexp.a) \
			+lib=(libmd5.a) \
			:exe

%comile_flags == <<
    +cxx_flags='-ansi -pedantic -Wall'
    +cxx_flags='-Wpointer-arith -Wcast-align -Winline -Wmissing-prototypes'
    +cxx_flags='-Wmissing-declarations -Wnested-externs -Wno-long-long'
    +cc_flags='-pedantic -Wall'
    +cc_flags='-Wpointer-arith -Wcast-align -Winline -Wmissing-prototypes'
    +cc_flags='-Wmissing-declarations -Wnested-externs -Wno-long-long'
    +optimize=0
    +debug
    +define='DEBUG'

%mapson.cc.sm == <<
    address-db.cc
    config.cc
    deliver.cc
    extract-addresses.cc
    gather-addresses.cc
    log.cc
    mapson.cc
    request-confirmation.cc
    spool.cc

librfc822.a == librfc822/%librfc822.a.sm +(%comile_flags) :a

libparse-config-file.a == libparse-config-file/%libparse-config-file.a.sm +(%comile_flags) :a

libvarexp.a == libvarexp/%libvarexp.a.sm +(%comile_flags) :a

libmd5.a == libmd5/%libmd5.a.sm +(%comile_flags) :a

%clean ! == !<<
    rm -f librfc822.a libparse-config-file.a libvarexp.a libmd5.a mapson
